<script src="node_modules/socket.io-client/dist/socket.io.js"></script>
<img/>

<script>
const socket = io('http://localhost:3052');

socket.on('cameras', cameras => {
		for(const id of cameras) {
			function imageHandler(channel) {
				const $image = document.createElement("img");
				document.body.append($image);
				$image.height = 400;

				socket.on(channel, image => {
					const arrayBufferView = new Uint8Array(image);
					const blob = new Blob([ arrayBufferView ], { type: 'image/jpeg' });

					$image.src = window.URL.createObjectURL(blob);
				});
			}

			imageHandler(`image-${id}`);
			imageHandler(`image-${id}-1`);
			imageHandler(`image-${id}-2`);

			const $color = document.createElement("p");
			document.body.append($color);

			socket.on(`color-${id}`, color => {
				$color.innerHTML = color;
			});

		}
});
</script>
